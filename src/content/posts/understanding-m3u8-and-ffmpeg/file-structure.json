{
  "blocks": [
    {
      "id": "structure-heading",
      "type": "heading",
      "props": {
        "content": "m3u8ファイルの基本構造",
        "level": 2,
        "align": "left"
      }
    },
    {
      "id": "m3u8-hierarchy",
      "type": "mermaid",
      "props": {
        "content": "graph TD\nA[master.m3u8] -->|高画質| B[1080p.m3u8]\nA -->|中画質| C[720p.m3u8]\nA -->|低画質| D[480p.m3u8]\nB --> B1[segment1.ts]\nB --> B2[segment2.ts]\nB --> B3[segment3.ts]\nC --> C1[segment1.ts]\nC --> C2[segment2.ts]\nC --> C3[segment3.ts]\nD --> D1[segment1.ts]\nD --> D2[segment2.ts]\nD --> D3[segment3.ts]",
        "caption": "m3u8ファイルとセグメントの階層構造",
        "theme": "default"
      }
    },
    {
      "id": "structure",
      "type": "text",
      "props": {
        "content": "以下はシンプルなm3u8ファイルの例です。各行の意味を理解することで、ファイルの構造が把握できます。",
        "align": "left"
      }
    },
    {
      "id": "m3u8-example",
      "type": "code",
      "props": {
        "language": "m3u8",
        "code": "#EXTM3U\n#EXT-X-VERSION:3\n#EXT-X-TARGETDURATION:10\n#EXT-X-MEDIA-SEQUENCE:0\n#EXTINF:9.009,\nsegment1.ts\n#EXTINF:9.009,\nsegment2.ts\n#EXTINF:9.009,\nsegment3.ts\n#EXT-X-ENDLIST",
        "fileName": "playlist.m3u8"
      }
    },
    {
      "id": "m3u8-explanation",
      "type": "text",
      "props": {
        "content": "- `#EXTM3U`: m3u8ファイルであることを示す宣言\n- `#EXT-X-TARGETDURATION`: セグメントの最大再生時間（秒）\n- `#EXT-X-MEDIA-SEQUENCE`: 再生すべきセグメント番号の開始点\n- `#EXTINF`: 次のセグメントの再生時間（秒）\n- `segment1.ts`: 動画・音声の実際のデータ（チャンク）",
        "align": "left"
      }
    },
    {
      "id": "streaming-flow",
      "type": "mermaid",
      "props": {
        "content": "sequenceDiagram\nparticipant C as Client\nparticipant S as Server\nC->>S: Request master.m3u8\nS->>C: Response with quality options\nC->>S: Request specific quality.m3u8\nS->>C: Response with segment list\nloop Streaming\n    C->>S: Request segment.ts\n    S->>C: Stream segment data\nend",
        "caption": "HLSストリーミングの基本的なフロー",
        "theme": "default"
      }
    },
    {
      "id": "cautions",
      "type": "callout",
      "props": {
        "title": "m3u8ファイルを扱う際の注意点",
        "type": "warning",
        "content": "1. **セキュリティリスク**：信頼できないURLから取得したm3u8ファイルを安易に再生すると、ウイルス感染や情報漏洩のリスクがあります。\n\n2. **互換性の問題**：プレーヤーやデバイスによってはm3u8に対応していないケースがあります。事前に環境をチェックしましょう。\n\n3. **ネットワークの影響**：m3u8を介したHLSはストリーミング再生が前提。回線速度や安定性が低い環境では再生が途切れる可能性があります。"
      }
    }
  ]
}