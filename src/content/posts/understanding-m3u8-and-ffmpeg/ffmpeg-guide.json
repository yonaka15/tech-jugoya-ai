{
  "blocks": [
    {
      "id": "ffmpeg-heading",
      "type": "heading",
      "props": {
        "content": "FFmpegでm3u8を扱う方法",
        "level": 2,
        "align": "left"
      }
    },
    {
      "id": "ffmpeg-intro",
      "type": "text",
      "props": {
        "content": "m3u8ファイルをダウンロード・変換・作成するうえで、FFmpegは強力なオープンソースツールです。以下のサンプルコマンドを活用してみましょう。",
        "align": "left"
      }
    },
    {
      "id": "basic-download-heading",
      "type": "heading",
      "props": {
        "content": "基本的なダウンロード",
        "level": 3,
        "align": "left"
      }
    },
    {
      "id": "basic-download",
      "type": "code",
      "props": {
        "language": "bash",
        "code": "ffmpeg -i \"http://example.com/video_url.m3u8\" \\\n  -c copy -bsf:a aac_adtstoasc output.mp4",
        "fileName": "basic-download.sh"
      }
    },
    {
      "id": "basic-download-explanation",
      "type": "text",
      "props": {
        "content": "基本的なダウンロードコマンドでは：\n- `-c copy`: 映像・音声を再エンコードせずにコピー\n- `-bsf:a aac_adtstoasc`: AAC音声をMP4で再生可能な形式に変換",
        "align": "left"
      }
    },
    {
      "id": "advanced-heading",
      "type": "heading",
      "props": {
        "content": "高度な使用例",
        "level": 3,
        "align": "left"
      }
    },
    {
      "id": "advanced-options",
      "type": "code",
      "props": {
        "language": "bash",
        "code": "# 特定の解像度でダウンロード\nffmpeg -i \"http://example.com/master.m3u8\" \\\n  -c copy -bsf:a aac_adtstoasc -vf \"scale=1920:1080\" output.mp4\n\n# ライブストリームを1時間録画\nffmpeg -i \"http://example.com/live.m3u8\" \\\n  -c copy -t 01:00:00 output.mp4\n\n# MP4からHLSストリームを作成\nffmpeg -i input.mp4 \\\n  -profile:v baseline -level 3.0 \\\n  -start_number 0 -hls_time 10 -hls_list_size 0 \\\n  -f hls output.m3u8",
        "fileName": "advanced-ffmpeg.sh"
      }
    },
    {
      "id": "error-handling",
      "type": "callout",
      "props": {
        "title": "よくあるエラーへの対処法",
        "type": "info",
        "content": "### 403 Forbiddenエラーの場合\n\n```bash\nffmpeg -headers \"Referer: https://example.com/\\r\\n\" \\\n  -i \"URL\" -c copy output.mp4\n```\n\n### SSL/TLSエラーの場合\n\n```bash\nffmpeg -protocol_whitelist file,http,https,tcp,tls,crypto \\\n  -i \"URL\" -c copy output.mp4\n```"
      }
    },
    {
      "id": "summary-heading",
      "type": "heading",
      "props": {
        "content": "まとめ",
        "level": 2,
        "align": "left"
      }
    },
    {
      "id": "summary",
      "type": "text",
      "props": {
        "content": "FFmpegは柔軟なオプションと強力な機能を備えており、m3u8ファイルの様々な操作に対応できます。基本的なダウンロードから高度な変換まで、目的に応じて適切なコマンドを選択することで、効率的な作業が可能です。エラーが発生した場合も、適切なオプションを追加することで多くの問題を解決できます。",
        "align": "left"
      }
    }
  ]
}