{
  "blocks": [
    {
      "id": "test-patterns-heading",
      "type": "heading",
      "props": {
        "level": 3,
        "content": "ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å®Ÿè£…ä¾‹",
        "align": "left"
      }
    },
    {
      "id": "test-patterns-text",
      "type": "text",
      "props": {
        "content": "ãƒ†ã‚¹ãƒˆã®å®Ÿè£…ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ´»ç”¨ã—ã¦ã„ã¾ã™ã€‚ç‰¹ã«å„featureãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã®ç²’åº¦ã§åˆ†å‰²ã™ã‚‹ã¹ãã‹ã¯ã¾ã æ¤œè¨ã®ä½™åœ°ãŒã‚ã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ï¼š\n\n1. **æ®µéšçš„ãªãƒ†ã‚¹ãƒˆ**:\n   - åŸºæœ¬æ©Ÿèƒ½ã‹ã‚‰è¤‡é›‘ãªæ©Ÿèƒ½ã¸\n   - ä¾å­˜é–¢ä¿‚ã‚’è€ƒæ…®ã—ãŸãƒ†ã‚¹ãƒˆã®é †åº\n   - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ä½“ç³»çš„ãªæ¤œè¨¼\n\n2. **å†åˆ©ç”¨å¯èƒ½ãªã‚¹ãƒ†ãƒƒãƒ—**:\n   - å…±é€šã®å‰ææ¡ä»¶ã‚’Backgroundã¨ã—ã¦å®šç¾©\n   - ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ãƒ¼ã®åŠ¹æœçš„ãªæ´»ç”¨\n   - ã‚¹ãƒ†ãƒƒãƒ—é–“ã§ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰\n\n3. **ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ãƒ†ã‚¹ãƒˆ**:\n   - ä¾‹å¤–ã®é©åˆ‡ãªå‡¦ç†\n   - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ¤œè¨¼\n   - ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ç¢ºèª"
      }
    },
    {
      "id": "advanced-examples-heading",
      "type": "heading",
      "props": {
        "level": 3,
        "content": "é«˜åº¦ãªãƒ†ã‚¹ãƒˆä¾‹",
        "align": "left"
      }
    },
    {
      "id": "advanced-feature",
      "type": "code",
      "props": {
        "language": "gherkin",
        "fileName": "tests/features/generation/batch_processing.feature",
        "code": "Feature: Batch Image Generation\n  As a service provider\n  I want to generate multiple images efficiently\n  So that I can handle concurrent requests\n\n  Background:\n    Given the pipeline is initialized with optimal settings\n\n  @performance\n  Scenario Outline: Generate images in batch\n    When I generate <count> images in parallel\n    Then all images should be generated successfully\n    And memory usage should stay below <memory_limit> GB\n    And total processing time should be less than <time_limit> seconds\n\n    Examples:\n      | count | memory_limit | time_limit |\n      | 2     | 12          | 5          |\n      | 4     | 16          | 10         |\n\n  @error-handling\n  Scenario: Handle resource exhaustion\n    Given system memory is limited to 4GB\n    When I attempt to generate multiple images\n    Then it should fail gracefully\n    And release all allocated resources\n    And provide appropriate error information"
      }
    },
    {
      "id": "advanced-implementation",
      "type": "code",
      "props": {
        "language": "python",
        "fileName": "tests/step_definitions/test_batch_generation.py",
        "code": "import pytest\nfrom pytest_bdd import scenario, given, when, then, parsers\nfrom concurrent.futures import ThreadPoolExecutor\nimport psutil\nimport time\n\n@scenario('generation/batch_processing.feature', 'Generate images in batch')\ndef test_batch_generation():\n    pass\n\n@given('the pipeline is initialized with optimal settings')\ndef optimized_pipeline(model_path):\n    pipeline = SDXLPipeline(model_path)\n    pipeline.enable_attention_slicing()\n    pipeline.enable_sequential_cpu_offload()\n    return pipeline\n\n@when(parsers.parse('I generate {count:d} images in parallel'))\ndef generate_batch(pipeline, count):\n    prompts = [f'Test prompt {i}' for i in range(count)]\n    start_time = time.time()\n    \n    with ThreadPoolExecutor(max_workers=count) as executor:\n        futures = [\n            executor.submit(pipeline.generate, prompt)\n            for prompt in prompts\n        ]\n        results = [f.result() for f in futures]\n    \n    return {\n        'results': results,\n        'time_taken': time.time() - start_time\n    }\n\n@then('all images should be generated successfully')\ndef verify_generation(results):\n    assert all(img is not None for img in results['results'])\n    for img in results['results']:\n        assert img.size == (512, 512)\n\n@then(parsers.parse('memory usage should stay below {memory_limit:d} GB'))\ndef verify_memory_usage(memory_limit):\n    memory_gb = psutil.Process().memory_info().rss / (1024 * 1024 * 1024)\n    assert memory_gb < memory_limit\n\n@then(parsers.parse('total processing time should be less than {time_limit:d} seconds'))\ndef verify_processing_time(results, time_limit):\n    assert results['time_taken'] < time_limit"
      }
    },
    {
      "id": "test-status-heading",
      "type": "heading",
      "props": {
        "level": 3,
        "content": "ãƒ†ã‚¹ãƒˆã®å®Ÿè£…çŠ¶æ³",
        "align": "left"
      }
    },
    {
      "id": "test-status-text",
      "type": "text",
      "props": {
        "content": "ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆå®Ÿè£…ã®çŠ¶æ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š\n\n1. **åŸºæœ¬æ©Ÿèƒ½** (âœ…)\n   - ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®åˆæœŸåŒ–\n   - ãƒ‡ãƒã‚¤ã‚¹è¨­å®šã®ç®¡ç†\n   - ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã®æ¤œè¨¼\n\n2. **æœ€é©åŒ–æ©Ÿèƒ½** (âœ…)\n   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–\n   - å‡¦ç†é€Ÿåº¦ã®æ”¹å–„\n   - ãƒ‡ãƒã‚¤ã‚¹å›ºæœ‰ã®æœ€é©åŒ–\n\n3. **ç”»åƒç”Ÿæˆ** (ğŸš§)\n   - åŸºæœ¬çš„ãªç”Ÿæˆæ©Ÿèƒ½\n   - ãƒãƒƒãƒå‡¦ç†\n   - ã‚¨ãƒ©ãƒ¼å‡¦ç†\n\n4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** (ğŸš§)\n   - è² è·ãƒ†ã‚¹ãƒˆ\n   - ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£\n   - ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™"
      }
    }
  ]
}

